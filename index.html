<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <title>North</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.system h1,article.system h2,article.system h3,article.system h4,article.system h5,article.system h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.system >header{text-align:center;}article.system >header img.logo{display:block;margin:auto;max-height:170px;}article.system >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.system >header .version{vertical-align:bottom;}article.system >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.system >header .description{margin:0;}article.system >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.system >header .pages a{display:inline-block;padding:0 0.2em;}article.system >section{margin:1em 0 1em 0;}article.system #index >ul{list-style:none;margin:0;padding:0;}article.system .row label{display:inline-block;min-width:6em;}article.system #system .row{display:flex;}article.system #system #dependencies{display:inline;margin:0;padding:0;}article.system #system #dependencies li{display:inline;padding:0 0.2em;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;}</style> </head> <body> <article class="system"> <header>  <img class="logo" src="north-logo.png" alt="Logo">  <h1>north</h1> <span class="version">1.0.0</span> <nav class="languages">      <a href="index.html">English</a>              </nav> <p class="description">oAuth 1.0a server and client implementation, the successor to South.</p> <nav class="pages">      <a href="index.html">north</a>        <a href="north-dexador/index.html">north dexador</a>        <a href="north-drakma/index.html">north drakma</a>  </nav> </header> <section id="documentation"><h2>About North</h2> <p>North is a library that implements the OAuth 1.0a consumer and provider protocols. It allows you to connect to an OAuth provider and request its resources, or to build your own OAuth provider.</p> <h2>How To: Client</h2> <p>If you want to connect to an OAuth provider, simply instantiate a <code><a href="#CLASS%20NORTH%3ACLIENT" class="xref">client</a></code> and pass it the required parameters. Following the Twitter requirements and using the tokens from <a href="http://shinmera.github.io/chirp/">Chirp</a>, we end up with this:</p> <pre><code>(<a href="http://l1sp.org/cl/defvar" class="xref">defvar</a> *client*
  (<a href="http://l1sp.org/cl/make-instance" class="xref">make-instance</a>
   'north:client
   :key &quot;D1pMCK17gI10bQ6orBPS0w&quot;
   :secret &quot;BfkvKNRRMoBPkEtDYAAOPW4s2G9U8Z7u3KAf0dBUA&quot;
   :request-token-uri &quot;https://api.twitter.com/oauth/request_token&quot;
   :authorize-uri &quot;https://api.twitter.com/oauth/authorize&quot;
   :access-token-uri &quot;https://api.twitter.com/oauth/access_token&quot;))
</code></pre> <p>Next we start the authentication process:</p> <pre><code>(<a href="#GENERIC-FUNCTION%20NORTH%3AINITIATE-AUTHENTICATION" class="xref">north:initiate-authentication</a> *client*)
</code></pre> <p>Visit the returned URL and enter the verification code:</p> <pre><code>(<a href="#GENERIC-FUNCTION%20NORTH%3ACOMPLETE-AUTHENTICATION" class="xref">north:complete-authentication</a> *client* &quot;.....&quot;)
</code></pre> <p>And finally we can access some resources:</p> <pre><code>(ql:quickload :cl-json)
(defmacro with-json-decoding (() &amp;body body)
  `(let ((drakma:*text-content-types* (list* '(&quot;application&quot; . &quot;json&quot;) drakma:*text-content-types*)))
     (cl-json:decode-json-from-string
      (progn ,@body))))

(with-json-decoding ()
  (north:make-signed-request *client* &quot;https://api.twitter.com/1.1/account/verify_credentials.json&quot; :get
                             :params '((&quot;include_entities&quot; . &quot;true&quot;))))

(with-json-decoding ()
  (north:make-signed-request *client* &quot;https://api.twitter.com/1.1/statuses/update.json&quot; :post
                             :params '((&quot;status&quot; . &quot;North and South, no matter where I look there's parens.&quot;))))
</code></pre> <p>We can also post some data:</p> <pre><code>(with-json-decoding ()
  (<a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SIGNED-DATA-REQUEST" class="xref">north:make-signed-data-request</a> *client* &quot;https://api.twitter.com/1.1/statuses/update_with_media.json&quot;
                                  `((&quot;media[]&quot; . #p&quot;~/sweet-bear.jpg&quot;))
                                  :params '((&quot;status&quot; . &quot;Check out this sweet bear!&quot;))))
</code></pre> <p>In order to keep the access token and secret so you can resume your session without repeatedly logging in every time, you can serialise the client with <code><a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-LOAD-FORM" class="xref">make-load-form</a></code>.</p> <h2>How To: Server</h2> <p>In order to provide a server you need to have a way of persisting two main pieces of information: applications, and sessions. The minimal amount of information necessary for an application is its key and secret. You most likely want to add additional information such as a name, icon, and description so that they can be displayed to the user when they authorise a consumer. A session needs to store quite a few pieces more: a token, token-secret, verifier token, callback, the application key, and the access rights. Default classes to contain all this information are provided through <code><a href="#GENERIC-FUNCTION%20NORTH%3AAPPLICATION" class="xref">application</a></code> and <code><a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">session</a></code>.</p> <p>However, the persistence and bookkeeping of these objects is still up to your server implementations. To do this, you should subclass <code><a href="#CLASS%20NORTH%3ASERVER" class="xref">server</a></code> and implement methods for <code><a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-APPLICATION" class="xref">make-application</a></code>, <code><a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SESSION" class="xref">make-session</a></code>, <code><a href="#GENERIC-FUNCTION%20NORTH%3AAPPLICATION" class="xref">application</a></code>, <code><a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">session</a></code>, <code><a href="#GENERIC-FUNCTION%20NORTH%3AREHASH-SESSION" class="xref">rehash-session</a></code>, <code><a href="#GENERIC-FUNCTION%20NORTH%3AREVOKE-APPLICATION" class="xref">revoke-application</a></code>, <code><a href="#GENERIC-FUNCTION%20NORTH%3AREVOKE-SESSION" class="xref">revoke-session</a></code>, <code><a href="#GENERIC-FUNCTION%20NORTH%3ARECORD-NONCE" class="xref">record-nonce</a></code>, and <code><a href="#GENERIC-FUNCTION%20NORTH%3AFIND-NONCE" class="xref">find-nonce</a></code>. What exactly these functions should accomplish is described in their docstrings and should be fairly obvious.</p> <p>Once that is done, what's left to do is create a webservice with at least three endpoints. One for the request token, one for the authorization page, and one for the access token.</p> <h3>General Behaviour for All Endpoints</h3> <p>For each endpoint there exists a corresponding function to call, which will return a number of values that should be returned to the user. You can use <code><a href="#FUNCTION%20NORTH%3AALIST-%3EOAUTH-RESPONSE" class="xref">alist-&gt;oauth-response</a></code> to construct a properly formatted response body. The objects that you need to pass to these calls are your <code><a href="#CLASS%20NORTH%3ASERVER" class="xref">server</a></code> instance and a <code><a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST" class="xref">request</a></code> instance that encapsulates the data that the server received with the request.</p> <p>Each endpoint function performs certain checks against the request and in case of problems signals an error. Your server should intercept these and act as follows: if the error is a <code><a href="#CONDITION%20NORTH%3APARAMETER-ERROR" class="xref">parameter-error</a></code>, the HTTP response code should be <code>400</code>, and if the error is a <code><a href="#CONDITION%20NORTH%3AVERIFICATION-ERROR" class="xref">verification-error</a></code>, it should be <code>401</code>. Any other error is up to you. You may display information about the error in the response body, but the exact formatting thereof is up to you as well. It is however a good idea to output the same data format as your other endpoints would, aside from the oauth specific ones.</p> <h3>The Request Token Endpoint</h3> <p>The request token endpoint should call <code><a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH%2FREQUEST-TOKEN" class="xref">oauth/request-token</a></code> and return the values as <code>oauth_token</code>, <code>oauth_token_secret</code>, and <code>oauth_callback_confirmed</code> respectively.</p> <h3>The Authorize Endpoint</h3> <p>The authorize page is special in the sense that it is not called with an oauth signed request. Instead the user calls it through a browser and the only thing it receives is the request token. The provider must then first authenticate the user and after having done so, display a page to the user that shows information about the application that they're connecting through and give them the option to either allow the application access or deny it. </p> <p>If the user selects allow, <code><a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH%2FAUTHORIZE" class="xref">oauth/authorize</a></code> should be called. If it returns a third value, the server should cause the user to be redirected to that URL. If not, the server should display a page that shows the second value, which is the verification token. The user must then copy this value into the consumer.</p> <p>If the user selects deny, the provider must not necessarily do anything except ensure that the <code><a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">session</a></code> is revoked and thus prevent the consumer from gaining access. It is not required to notify the consumer of this in any way.</p> <h3>The Access Token Endpoint</h3> <p>The access token endpoint should call <code><a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH%2FACCESS-TOKEN" class="xref">oauth/access-token</a></code> and return the values as <code>oauth_token</code>, and <code>oauth_token_secret</code> respectively.</p> <h3>Protected Resource Endpoint</h3> <p>Any such endpoint should call <code><a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH%2FVERIFY" class="xref">oauth/verify</a></code>. This function returns nothing useful and only performs checks that if failed result in an error being signalled as usual. You may additionally want to check the session for permissions to access the specific endpoint if such a distinction exists. However, such additional functionality is up to you to design.</p> <h2>An Example Server / Client Setup</h2> <p>See the <a href="https://github.com/Shinmera/north/tree/master/example">north-example</a> system for a primitive, simple setup of a provider and consumer.</p> <h2>OAuth Overview</h2> <p>OAuth is supposed to provide a relatively convenient standardised way to authenticate a user against a service (provider), and then allow the application (consumer) to access resources on the user's behalf. Key to this are two parts, the signing process, and the actual authorisation process itself.</p> <h3>The Authorisation Process</h3> <p>Before an OAuth consumer can access any resources, it needs to obtain an access token. The path to this token happens in three distinct steps, during which several pieces of information need to be remembered and modified on both the consumer and provider's sides.</p> <h4>Step 0: Generating an Application</h4> <p>Unfortunately this is already where things begin to become awkward with the OAuth specification. The spec conflates what is essentially an application with the consumer. In order to improve clarity, North makes a distinction here. An application is a server-side instance that identifies a range of consumers. A consumer is a specific instance of a program that would like to connect to a provider through an application.</p> <p>Whatever the case may be, before you can connect at all, you need to have access to an application key and secret. These two pieces are vital in the signing and requesting process. In North, this can be done through <code><a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-APPLICATION" class="xref">make-application</a></code>. Once you have an application, you can get its <code><a href="#GENERIC-FUNCTION%20NORTH%3AKEY" class="xref">key</a></code> and <code><a href="#GENERIC-FUNCTION%20NORTH%3ASECRET" class="xref">secret</a></code>.</p> <h4>Step 1: Requesting a Request Token</h4> <p>Now we actually start exchanging things with the provider as a consumer. To do this we send a signed request to the server's request-token endpoint. The request is signed using our application's secret, and we pass along the application's key as an OAuth parameter. Additionally we must give the provider a callback parameter that tells it what to do in the next step.</p> <p>The provider then verifies our signature, and if it thinks everything is proper, then it sends back a body containing a request token and request secret. From here on out our requests will need to contain the token as an OAuth parameter and be signed with the request secret along with the application secret.</p> <h4>Step 2: The User Authorises the Consumer</h4> <p>The next step has to be done by the user themselves, such that granting access is always done through explicit consent. To do this, the consumer constructs an URL to the provider's authorize endpoint with the request token added as a GET parameter. The user then has to visit this URL.</p> <p>Once on the page, the user should be confronted with a confirmation dialog, potentially also displaying all the things the consumer could get access to, if authorised. If the user accepts, the server generates a verifier token, which is then passed back to the consumer. This happens either automatically through a redirect, if the callback was a valid URL, or through the user manually, if the callback was the string &quot;oob&quot;. In the latter case, the verifier is displayed to the user on the website, and they have to copy it into the consumer.</p> <h4>Step 3: Requesting an Access Token</h4> <p>The final step is to exchange the request token with an access token, using the verifier that was obtained in the previous section. To do this, a fully signed request is made to the provider's access-token endpoint, which verifies the request and verifier, rehashes the consumer's token, and upgrades its access. It then returns the newly generated access token and secret that will henceforth be used to sign requests.</p> <h4>Step 4: Accessing Resources</h4> <p>Now that we have an access token, we can start requesting whatever resources we were permitted to. A provider may for example offer several kinds of access tokens with varying ranges of permissions. The request endpoints are of course the provider's own decision. The only thing that OAuth specifies henceforth is that the request must be fully signed.</p> <h3>Error Handling</h3> <p>Now, you may notice in all this that there's no specification on how to handle errors. And you're right. The only thing OAuth says is that missing/duplicate parameters must result in an HTTP return code of 400, and an invalid signature must result in a return code of 401. Everything else, what specifically went wrong, how to fix it, or any other thing that might be useful is unspecified. Some providers do give some error information, but the format in which the error is presented is up to them.</p> <p>As such, North makes no assumptions whatsoever about how to parse the body contents on an error. You will, unfortunately, have to deal with that on your own. To do this, handle the <code><a href="#CONDITION%20NORTH%3AREQUEST-FAILED" class="xref">request-failed</a></code> error and parse the <code><a href="#GENERIC-FUNCTION%20NORTH%3ABODY" class="xref">body</a></code> of it.</p> <h3>The Signing Process</h3> <p>Now comes the hard part. The actual signing process is unbelievably convoluted and incredibly easy to mess up. Let's start simple.</p> <h4>The Authorization Header</h4> <p>A signed request must contain an &quot;Authorization&quot; header, which must begin with the string &quot;OAuth &quot;. Following it are a series of oauth parameters. Each key/value pair is separated by a comma and a space, each key is separated from the value by an equals sign, and each value is surrounded by double-quotes. Each key and value must also be url-encoded. Keep in mind here that in order to transmit the request, this header is again url-encoded.</p> <h4>The OAuth Parameters</h4> <p>For each request a certain set of OAuth parameters must be present. Every request must have the <code>oauth_consumer_key</code>, <code>oauth_signature_method</code>, <code>oauth_signature</code>, <code>oauth_timestamp</code>, and <code>oauth_nonce</code>. Additional parameters are <code>oauth_callback</code>, <code>oauth_token</code>, and <code>oauth_verifier</code>, and whatever else the provider may want to require. These parameters must be ordered lexicographically by their keys and in case of duplicate keys by their values.</p> <p>The <code>oauth_consumer_key</code> is the application key that we obtained in step 0. The <code>oauth_timestamp</code> must be an integer representing the unix-time when the request was formed. The <code>oauth_nonce</code> must be a unique string for each timestamp, but must not necessarily be globally unique.</p> <h4>The OAuth Signature</h4> <p>The final piece is the signature itself. The signature is created using a signing method (<code>oauth_signature_method</code>) over a signature base string, using a signature key.</p> <p>The signature key is simply the application secret, appended with an &amp;, appended with the token secret, if we have one.</p> <p>The signature base string is constructed by the uppercase representation of the request method (POST/GET) followed by an &amp;, followed by the url-encoded, normalised url, followed by an &amp;, followed by the url-encoded, concatenated parameters. </p> <h5>Normalising the URL</h5> <p>The URL must be normalised such that the schema is in all lowercase and the port is omitted if it is 80 and the schema is http, or if it is 443 and the schema is https.</p> <h5>Concatenating the Parameters</h5> <p>The parameters here are all of the parameters. Namely the oauth parameters (except the signature itself), the get parameters, and the post parameters. The parameters must again be sorted as before, but now they are concatenated differently. Namely each pair is separated by an ampersand, the key is separated from the value by an equals sign, and both keys and values must be url-encoded. Note that unlike before, values must not be surrounded by double-quotes.</p> <h5>Signing the Token</h5> <p>Potentially any signature method you might want is supported. The provider can request whatever they want. North implements the plaintext, hmac-sha1, and cmac-aes methods suggested by the spec. See the relevant hashing methods for information on how they work.</p> <h3>A Reminder, Just For Fun</h3> <p>The request is sent, url-encoded. The authorization header has url-encoded parameter values. One of those is the signature, which was constructed from a base string that has an url-encoded url part, and an url-encoded parameter part. The parameter part has url-encoded parameter values. Url-encode!</p> </section>  <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">1.0.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external" href="https://github.com/Shinmera/north">north-drakma</a></li></ul> </div>   <div class="row"> <label for="author">Author:</label> <a id="author" href="mailto:shinmera@tymoon.eu">Nicolas Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/Shinmera/north/blob/master/LICENSE">Artistic</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://github.com/Shinmera/north">https://github.com/Shinmera/north</a> </div>  </section>  <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE NORTH"> <header> <h3> <a href="#PACKAGE%20NORTH">NORTH</a> </h3> <ul class="nicknames"> <li>ORG.SHIRAKUMO.NORTH</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/package.lisp#L8">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition special-variable" id="VARIABLE NORTH:*EXTERNAL-FORMAT*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20NORTH%3A%2AEXTERNAL-FORMAT%2A">*EXTERNAL-FORMAT*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L9">Source</a>  </header> <div class="docstring"><pre>The external format to use to url-en/decode and execute requests.
Defaults to :UTF-8</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS NORTH:APPLICATION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20NORTH%3AAPPLICATION">APPLICATION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L38">Source</a>  </header> <div class="docstring"><pre>Container for an OAuth application that provides consumers a means to connect to the provider.

See <a href="#GENERIC-FUNCTION%20NORTH%3AKEY" class="xref">KEY</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ASECRET" class="xref">SECRET</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ANAME" class="xref">NAME</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS NORTH:CLIENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20NORTH%3ACLIENT">CLIENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/client.lisp#L19">Source</a>  </header> <div class="docstring"><pre>An oAuth client class to encapsulate a single connection to a provider.

Contains all the necessary information and state to manage the connection.
You may serialise this object into a reloadable form using MAKE-LOAD-FORM.
Unless the provider expires access tokens or the token is revoked for some reason
or another, the authentication process for a client has to be done only once.

See <a href="#GENERIC-FUNCTION%20NORTH%3AKEY" class="xref">KEY</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ASECRET" class="xref">SECRET</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN" class="xref">TOKEN</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN-SECRET" class="xref">TOKEN-SECRET</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ACALLBACK" class="xref">CALLBACK</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST-TOKEN-URI" class="xref">REQUEST-TOKEN-URI</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AAUTHORIZE-URI" class="xref">AUTHORIZE-URI</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AACCESS-TOKEN-URI" class="xref">ACCESS-TOKEN-URI</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AVERIFY-URI" class="xref">VERIFY-URI</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AINITIATE-AUTHENTICATION" class="xref">INITIATE-AUTHENTICATION</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ACOMPLETE-AUTHENTICATION" class="xref">COMPLETE-AUTHENTICATION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS NORTH:REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20NORTH%3AREQUEST">REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/request.lisp#L13">Source</a>  </header> <div class="docstring"><pre>Container class to represent an HTTP request.

Upon initialisation a few default oauth parameters are set, if not given already:
  oauth_nonce             Set to (make-nonce)
  oauth_signature_method  Set to &quot;HMAC-SHA1&quot;
  oauth_timestamp         Set to (make-timestamp)
  oauth_version           Set to &quot;1.0&quot;
Additionally, if the headers given include an Authorization header, then the
oauth parameters are overridden by the results of DESTRUCTURE-OAUTH-HEADER.

See <a href="#GENERIC-FUNCTION%20NORTH%3AHTTP-METHOD" class="xref">HTTP-METHOD</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AURL" class="xref">URL</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3APARAMETERS" class="xref">PARAMETERS</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AHEADERS" class="xref">HEADERS</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH" class="xref">OAUTH</a>
See <a href="#FUNCTION%20NORTH%3ADESTRUCTURE-OAUTH-HEADER" class="xref">DESTRUCTURE-OAUTH-HEADER</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS NORTH:SERVER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20NORTH%3ASERVER">SERVER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L47">Source</a>  </header> <div class="docstring"><pre>Mixin representing a server class.</pre></div> </article> </li>  <li> <article class="definition class" id="CLASS NORTH:SESSION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20NORTH%3ASESSION">SESSION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L23">Source</a>  </header> <div class="docstring"><pre>Session container to represent a connection with a consumer.

See <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN" class="xref">TOKEN</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN-SECRET" class="xref">TOKEN-SECRET</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AVERIFIER" class="xref">VERIFIER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ACALLBACK" class="xref">CALLBACK</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AKEY" class="xref">KEY</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AACCESS" class="xref">ACCESS</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS NORTH:SIMPLE-SERVER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20NORTH%3ASIMPLE-SERVER">SIMPLE-SERVER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L151">Source</a>  </header> <div class="docstring"><pre>A very primitive and simple sample server implementation that stores everything in mere hash tables.

Do not use this server for your production provider. You should implement
one yourself the provides proper persistence and expiration of the providers,
sessions, and nonces.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AAPPLICATIONS" class="xref">APPLICATIONS</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ASESSIONS" class="xref">SESSIONS</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ANONCES" class="xref">NONCES</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:BAD-VERSION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3ABAD-VERSION">BAD-VERSION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L28">Source</a>  </header> <div class="docstring"><pre>An error signalled when the oAuth request specifies a bad version field.

See <a href="#CONDITION%20NORTH%3APARAMETER-ERROR" class="xref">PARAMETER-ERROR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:CALLBACK-UNCONFIRMED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3ACALLBACK-UNCONFIRMED">CALLBACK-UNCONFIRMED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L73">Source</a>  </header> <div class="docstring"><pre>An error signalled when the provider returns a non-&quot;true&quot; value for the oauth_callback_confirmed key.

See <a href="#CONDITION%20NORTH%3ACLIENT-ERROR" class="xref">CLIENT-ERROR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:CLIENT-ERROR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3ACLIENT-ERROR">CLIENT-ERROR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L19">Source</a>  </header> <div class="docstring"><pre>An error signalled when the oAuth client encounters a problem.

See <a href="#CONDITION%20NORTH%3ANORTH-CONDITION" class="xref">NORTH-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:INVALID-APPLICATION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3AINVALID-APPLICATION">INVALID-APPLICATION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L57">Source</a>  </header> <div class="docstring"><pre>An error signalled when the oauth_consumer_key of the request is invalid or unknown.

See <a href="#CONDITION%20NORTH%3AVERIFICATION-ERROR" class="xref">VERIFICATION-ERROR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:INVALID-SIGNATURE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3AINVALID-SIGNATURE">INVALID-SIGNATURE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L43">Source</a>  </header> <div class="docstring"><pre>An error signalled when the oAuth signature cannot be verified. 
This is most likely due to a bad signing procedure on the client's behalf, or a 
disagreement about the tokens and secrets used in the signing process.

See <a href="#CONDITION%20NORTH%3AVERIFICATION-ERROR" class="xref">VERIFICATION-ERROR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:INVALID-TOKEN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3AINVALID-TOKEN">INVALID-TOKEN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L52">Source</a>  </header> <div class="docstring"><pre>An error signalled when the token of the request is invalid or unknown.

See <a href="#CONDITION%20NORTH%3AVERIFICATION-ERROR" class="xref">VERIFICATION-ERROR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:INVALID-VERIFIER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3AINVALID-VERIFIER">INVALID-VERIFIER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L47">Source</a>  </header> <div class="docstring"><pre>An error signalled when the verifier of the request is invalid for the associated request token.

See <a href="#CONDITION%20NORTH%3AVERIFICATION-ERROR" class="xref">VERIFICATION-ERROR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:NONCE-REUSED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3ANONCE-REUSED">NONCE-REUSED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L38">Source</a>  </header> <div class="docstring"><pre>An error signalled when a nonce is used twice within the same timestamp.

See <a href="#CONDITION%20NORTH%3AVERIFICATION-ERROR" class="xref">VERIFICATION-ERROR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:NORTH-CONDITION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3ANORTH-CONDITION">NORTH-CONDITION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Base condition class for conditions in the North system.

See <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST" class="xref">REQUEST</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:PARAMETER-ERROR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3APARAMETER-ERROR">PARAMETER-ERROR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L13">Source</a>  </header> <div class="docstring"><pre>An error signalled when the parameters given to the provider are incomplete or badly specified.
Should end up in an HTTP 400 return code.

See <a href="#CONDITION%20NORTH%3ANORTH-CONDITION" class="xref">NORTH-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:PARAMETERS-MISSING"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3APARAMETERS-MISSING">PARAMETERS-MISSING</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L22">Source</a>  </header> <div class="docstring"><pre>An error signalled when the oAuth request does not include all the required oAuth parameters.

See <a href="#GENERIC-FUNCTION%20NORTH%3APARAMETERS" class="xref">PARAMETERS</a>
See <a href="#CONDITION%20NORTH%3APARAMETER-ERROR" class="xref">PARAMETER-ERROR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:REQUEST-FAILED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3AREQUEST-FAILED">REQUEST-FAILED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L62">Source</a>  </header> <div class="docstring"><pre>An error signalled when a client's request returned with a non-200 status code.

See <a href="#GENERIC-FUNCTION%20NORTH%3ABODY" class="xref">BODY</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ASTATUS-CODE" class="xref">STATUS-CODE</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AHEADERS" class="xref">HEADERS</a>
See <a href="#CONDITION%20NORTH%3ACLIENT-ERROR" class="xref">CLIENT-ERROR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:VERIFICATION-ERROR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3AVERIFICATION-ERROR">VERIFICATION-ERROR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L16">Source</a>  </header> <div class="docstring"><pre>An error signalled when the parameters given to the provider fail the verification test.
Should end up in an HTTP 401 return code.

See <a href="#CONDITION%20NORTH%3ANORTH-CONDITION" class="xref">NORTH-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION NORTH:VERIFIER-TAKEN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20NORTH%3AVERIFIER-TAKEN">VERIFIER-TAKEN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/conditions.lisp#L33">Source</a>  </header> <div class="docstring"><pre>An error signalled when a verifier token for a request is re-used or the authorization step is repeated for the same request token.

See <a href="#CONDITION%20NORTH%3AVERIFICATION-ERROR" class="xref">VERIFICATION-ERROR</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:ALIST-&gt;OAUTH-RESPONSE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3AALIST-%3EOAUTH-RESPONSE">ALIST-&gt;OAUTH-RESPONSE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">ALIST</li> </ul>  </header> <div class="docstring"><pre>Concatenates an alist into an oauth response body.

See CONCAT-PARAMS.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:CONCAT-PARAMS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3ACONCAT-PARAMS">CONCAT-PARAMS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">PARAMS</li>  <li class="argument">&amp;KEY</li>  <li class="argument">QUOTE</li>  <li class="argument">(DELIM &amp;)</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L87">Source</a>  </header> <div class="docstring"><pre>Concatenate the given alist into a single parameter string.

This intermits an equal sign between key and value, and DELIM between each pair.
If QUOTE is non-NIL, the values are surrounded by #\&quot;.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:CREATE-SIGNATURE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3ACREATE-SIGNATURE">CREATE-SIGNATURE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CONSUMER-SECRET</li>  <li class="argument">TOKEN-SECRET</li>  <li class="argument">METHOD</li>  <li class="argument">URL</li>  <li class="argument">OAUTH-PARAMS</li>  <li class="argument">&amp;OPTIONAL</li>  <li class="argument">PARAMS</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L115">Source</a>  </header> <div class="docstring"><pre>Create an oAuth signature for the given parameters.

This does not include the oauth_signature parameters if it is passed in OAUTH-PARAMS.
Calls SIGN using the oauth_signature_method oauth param, a normalized token from the
OAUTH-PARAMS and GET-PARAMS, and the given CONSUMER-SECRET and TOKEN-SECRET.

See <a href="#GENERIC-FUNCTION%20NORTH%3ASIGN" class="xref">SIGN</a>
See NORMALIZE-TOKEN</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:DESTRUCTURE-OAUTH-HEADER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3ADESTRUCTURE-OAUTH-HEADER">DESTRUCTURE-OAUTH-HEADER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">HEADER</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L128">Source</a>  </header> <div class="docstring"><pre>Destructures an Authorization header into its oauth parameters.

Returns an alist of all the parameters with their associated values.
If the header is malformed, an error is signalled.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:MAKE-NONCE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3AMAKE-NONCE">MAKE-NONCE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L68">Source</a>  </header> <div class="docstring"><pre>Creates a default nonce by turning a V4 UUID into a string.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:MAKE-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3AMAKE-REQUEST">MAKE-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">URL</li>  <li class="argument">METHOD</li>  <li class="argument">&amp;KEY</li>  <li class="argument">PARAMS</li>  <li class="argument">HEADERS</li>  <li class="argument">OAUTH</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/request.lisp#L37">Source</a>  </header> <div class="docstring"><pre>Shorthand function to construct a request object.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:MAKE-TIMESTAMP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3AMAKE-TIMESTAMP">MAKE-TIMESTAMP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L71">Source</a>  </header> <div class="docstring"><pre>Creates a default timestamp by turning a unix timestamp into a string.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:NORMALIZE-URL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3ANORMALIZE-URL">NORMALIZE-URL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">URL</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L104">Source</a>  </header> <div class="docstring"><pre>Normalises the URL to avoid ambiguity. 

In specific, it downcases the scheme, removes leading slashes from the path, and
omits the 80 port if the scheme is HTTP, and the 443 port if the scheme is HTTPS.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:OAUTH-RESPONSE-&gt;ALIST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3AOAUTH-RESPONSE-%3EALIST">OAUTH-RESPONSE-&gt;ALIST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">BODY</li> </ul>  </header> <div class="docstring"><pre>Splits the body into an alist of keys and values.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:PGET"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3APGET">PGET</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">KEY</li>  <li class="argument">ALIST</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L16">Source</a>  </header> <div class="docstring"><pre>Easy accessor for alists. 

Checks keys STRING-EQUALly and returns the value directly, if found.
SETF-able. If a key is set that does not occur in the alist, a new
entry is PUSHed, otherwise the existing one is modified. The key is
coerced using ALIST-KEY

See <a href="#FUNCTION%20NORTH%3AALIST-KEY" class="xref">ALIST-KEY</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:SORT-PARAMS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3ASORT-PARAMS">SORT-PARAMS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">PARAMS</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L84">Source</a>  </header> <div class="docstring"><pre>Creates a fresh list in which the parameters are sorted.

See <a href="#FUNCTION%20NORTH%3APARAM%3C" class="xref">PARAM&lt;</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:URL-DECODE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3AURL-DECODE">URL-DECODE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">STRING</li>  <li class="argument">&amp;OPTIONAL</li>  <li class="argument">(EXTERNAL-FORMAT *EXTERNAL-FORMAT*)</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L45">Source</a>  </header> <div class="docstring"><pre>Decode the string into plain text format.

See <a href="#VARIABLE%20NORTH%3A%2AEXTERNAL-FORMAT%2A" class="xref">*EXTERNAL-FORMAT*</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION NORTH:URL-ENCODE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20NORTH%3AURL-ENCODE">URL-ENCODE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">THING</li>  <li class="argument">&amp;OPTIONAL</li>  <li class="argument">(EXTERNAL-FORMAT *EXTERNAL-FORMAT*)</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L34">Source</a>  </header> <div class="docstring"><pre>Encode the string into url-encoded format as required by the oAuth spec.

Namely all characters except [0-9], [a-z], [A-Z], and [-._~] are encoded.

See <a href="#VARIABLE%20NORTH%3A%2AEXTERNAL-FORMAT%2A" class="xref">*EXTERNAL-FORMAT*</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:ACCESS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AACCESS">ACCESS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accessor to what kind of access the session has. Should initially be :request, and is set to :access once the handshake has completed.

See <a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">SESSION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF ACCESS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20ACCESS%29">(SETF ACCESS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:ACCESS-TOKEN-URI"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AACCESS-TOKEN-URI">ACCESS-TOKEN-URI</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the oauth/access-token uri, the third endpoint for the oAuth process.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF ACCESS-TOKEN-URI)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20ACCESS-TOKEN-URI%29">(SETF ACCESS-TOKEN-URI)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:APPLICATION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AAPPLICATION">APPLICATION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">APPLICATION-KEY</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L11">Source</a>  </header> <div class="docstring"><pre>Returns the application object associated with the given key on the server, if any.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AAPPLICATION" class="xref">APPLICATION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:APPLICATIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AAPPLICATIONS">APPLICATIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accessor to the hash table of key -&gt; application in the server.

See <a href="#CLASS%20NORTH%3ASIMPLE-SERVER" class="xref">SIMPLE-SERVER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF APPLICATIONS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20APPLICATIONS%29">(SETF APPLICATIONS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:AUTHORIZE-URI"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AAUTHORIZE-URI">AUTHORIZE-URI</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the oauth/authorize uri, the second endpoint for the oAuth process.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF AUTHORIZE-URI)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20AUTHORIZE-URI%29">(SETF AUTHORIZE-URI)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:BODY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ABODY">BODY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CONDITION</li> </ul>  </header> <div class="docstring"><pre>The returned http body of the failed request. This may be an octet-vector if the content type is not known to drakma.

See <a href="#CONDITION%20NORTH%3AREQUEST-FAILED" class="xref">REQUEST-FAILED</a>
See DRAKMA:*TEXT-CONTENT-TYPES*</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:CALL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ACALL">CALL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">REQUEST</li>  <li class="argument">&amp;REST</li>  <li class="argument">ARGS</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/client.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Executes the given request object.

If the http status code returned is 200, the response body is returned.
Otherwise, an error of type REQUEST-FAILED is signalled. Note that the
allowed extra arguments are dependant on the backend being used. The
one parameter that must be universally recognised is the :FORM-DATA
boolean, designating whether the parameters contain form data to be sent
over the request such as files. Files in the parameter list should be
either a cons of the parameter name and file as pathname or octet-vector,
or a list of name, file, and optional keyword arguments. The only file
keyword argument currently recognised is :CONTENT-TYPE, specifying the
supplied content-type that should be submitted to the server for the file.

See <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST" class="xref">REQUEST</a>
See <a href="#CONDITION%20NORTH%3AREQUEST-FAILED" class="xref">REQUEST-FAILED</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:CALL-SIGNED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ACALL-SIGNED">CALL-SIGNED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">REQUEST</li>  <li class="argument">CONSUMER-SECRET</li>  <li class="argument">&amp;OPTIONAL</li>  <li class="argument">TOKEN-SECRET</li>  <li class="argument">&amp;REST</li>  <li class="argument">ARGS</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/client.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Execute the given request object after signing it.

See <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST" class="xref">REQUEST</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ACALL" class="xref">CALL</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-AUTHORIZED" class="xref">MAKE-AUTHORIZED</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SIGNED" class="xref">MAKE-SIGNED</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:CALLBACK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ACALLBACK">CALLBACK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the callback to which the oauth/authorize step should redirect.
If it should not redirect, the callback must be exactly the string &quot;oob&quot;.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF CALLBACK)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20CALLBACK%29">(SETF CALLBACK)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:COMPLETE-AUTHENTICATION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ACOMPLETE-AUTHENTICATION">COMPLETE-AUTHENTICATION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CLIENT</li>  <li class="argument">VERIFIER</li>  <li class="argument">&amp;OPTIONAL</li>  <li class="argument">TOKEN</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/client.lisp#L14">Source</a>  </header> <div class="docstring"><pre>Complete the authentication process for the client.

This performs an oauth/access-token request.
This operation modifies the TOKEN and TOKEN-SECRET fields of the client.
When the client has a VERIFY-URI given, an additional oauth/verify request is made
to test whether the full process was complete.

See <a href="#CLASS%20NORTH%3ACLIENT" class="xref">CLIENT</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SIGNED-REQUEST" class="xref">MAKE-SIGNED-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:FIND-NONCE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AFIND-NONCE">FIND-NONCE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">TIMESTAMP</li>  <li class="argument">NONCE</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L17">Source</a>  </header> <div class="docstring"><pre>If the given nonce was used before on the given timestamp, return non-NIL.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:HEADERS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AHEADERS">HEADERS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CONDITION</li> </ul>  </header> <div class="docstring"><pre>Accesses the HTTP headers of the request.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF HEADERS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20HEADERS%29">(SETF HEADERS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:HTTP-METHOD"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AHTTP-METHOD">HTTP-METHOD</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the HTTP-METHOD (GET/POST) of the request.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF HTTP-METHOD)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20HTTP-METHOD%29">(SETF HTTP-METHOD)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:INITIATE-AUTHENTICATION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AINITIATE-AUTHENTICATION">INITIATE-AUTHENTICATION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CLIENT</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/client.lisp#L13">Source</a>  </header> <div class="docstring"><pre>Start the authentication process for the client.

This performs an oauth/request-token request and constructs the proper 
oauth/authorize URL for the user to visit. This address is returned.
If the provider did not confirm the callback, an error of type CALLBACK-UNCONFIRMED
is signalled.
This operation modifies the TOKEN and TOKEN-SECRET fields of the client.

See <a href="#CLASS%20NORTH%3ACLIENT" class="xref">CLIENT</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SIGNED-REQUEST" class="xref">MAKE-SIGNED-REQUEST</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:KEY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AKEY">KEY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the application key.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF KEY)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20KEY%29">(SETF KEY)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:MAKE-APPLICATION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-APPLICATION">MAKE-APPLICATION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">&amp;KEY</li>  <li class="argument">NAME</li>  <li class="argument">&amp;ALLOW-OTHER-KEYS</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Creates and adds a new application object to the server.

Additionally supported keyword arguments are used as initargs for the application
instance. Which application class is used depends on the server.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AAPPLICATION" class="xref">APPLICATION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:MAKE-AUTHORIZED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-AUTHORIZED">MAKE-AUTHORIZED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">REQUEST</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/request.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Modifies the request to add the authorization header using the oauth parameters.

If the oauth_signature parameter is missing, an error is signalled.
Returns the request.

See <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST" class="xref">REQUEST</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:MAKE-SESSION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SESSION">MAKE-SESSION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">APPLICATION</li>  <li class="argument">CALLBACK</li>  <li class="argument">&amp;KEY</li>  <li class="argument">ACCESS</li>  <li class="argument">&amp;ALLOW-OTHER-KEYS</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Creates and adds a new session object to the server.

Additionally supported keyword arguments are used as initargs for the session
instance. Which session class is used depends on the server.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">SESSION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:MAKE-SIGNED"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SIGNED">MAKE-SIGNED</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">REQUEST</li>  <li class="argument">CONSUMER-SECRET</li>  <li class="argument">&amp;OPTIONAL</li>  <li class="argument">TOKEN-SECRET</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/request.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Modifies the request to add a signature to the oauth parameters.

This will also modify the oauth parameters list to remove duplicates or empty values.
Returns the request.

See <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST" class="xref">REQUEST</a>
See <a href="#FUNCTION%20NORTH%3ACREATE-SIGNATURE" class="xref">CREATE-SIGNATURE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:MAKE-SIGNED-DATA-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SIGNED-DATA-REQUEST">MAKE-SIGNED-DATA-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CLIENT</li>  <li class="argument">URL</li>  <li class="argument">DATA</li>  <li class="argument">&amp;KEY</li>  <li class="argument">PARAMS</li>  <li class="argument">HEADERS</li>  <li class="argument">OAUTH</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/client.lisp#L12">Source</a>  </header> <div class="docstring"><pre>Construct and execute a signed request to send data payloads.

Each data value can be either a pathname or an octet-vector.
Returns the result of the request execution as the first value and the constructed
request object itself as the second.

See <a href="#CLASS%20NORTH%3ACLIENT" class="xref">CLIENT</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST" class="xref">REQUEST</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ACALL-SIGNED" class="xref">CALL-SIGNED</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:MAKE-SIGNED-REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SIGNED-REQUEST">MAKE-SIGNED-REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CLIENT</li>  <li class="argument">URL</li>  <li class="argument">METHOD</li>  <li class="argument">&amp;KEY</li>  <li class="argument">PARAMS</li>  <li class="argument">HEADERS</li>  <li class="argument">OAUTH</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/client.lisp#L11">Source</a>  </header> <div class="docstring"><pre>Construct and execute a signed request for the given client.

Returns the result of the request execution as the first value and the constructed
request object itself as the second.

See <a href="#CLASS%20NORTH%3ACLIENT" class="xref">CLIENT</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST" class="xref">REQUEST</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ACALL-SIGNED" class="xref">CALL-SIGNED</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:NAME"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ANAME">NAME</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accessor to the name of the application.

See <a href="#GENERIC-FUNCTION%20NORTH%3AAPPLICATION" class="xref">APPLICATION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF NAME)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20NAME%29">(SETF NAME)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:NONCES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ANONCES">NONCES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accessor to the hash table of timestamp -&gt; nonce-list in the server.

See <a href="#CLASS%20NORTH%3ASIMPLE-SERVER" class="xref">SIMPLE-SERVER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF NONCES)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20NONCES%29">(SETF NONCES)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:OAUTH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH">OAUTH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the pure oauth parameters of the request.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF OAUTH)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20OAUTH%29">(SETF OAUTH)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:OAUTH/ACCESS-TOKEN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH%2FACCESS-TOKEN">OAUTH/ACCESS-TOKEN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">REQUEST</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L20">Source</a>  </header> <div class="docstring"><pre>Perform the oauth/access-token step of the process.

This verifies the request and if successful, upgrades its access to full.
It will also invalidate the session's verifier and rehash it.

Returns two values:
  TOKEN         --- The newly generated access token.
  TOKEN-SECRET  --- The newly generated access token secret.

Signals a PARAMETER-ERROR or VERIFICATION-ERROR on an invalid request.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AVERIFIER" class="xref">VERIFIER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AREHASH-SESSION" class="xref">REHASH-SESSION</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN" class="xref">TOKEN</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN-SECRET" class="xref">TOKEN-SECRET</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:OAUTH/AUTHORIZE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH%2FAUTHORIZE">OAUTH/AUTHORIZE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">REQUEST</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L19">Source</a>  </header> <div class="docstring"><pre>Perform the oauth/authorize step of the process.

This verifies the request and returns three values:
  TOKEN     --- The current request token.
  VERIFIER  --- The (possibly newly generated) verifier for the next step.
  URL       --- The callback URL to redirect to if the callback is not &quot;oob&quot;.
                If the callback is indeed &quot;oob&quot;, NIL is returned for this.

Signals a VERIFICATION-ERROR on an invalid request.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN" class="xref">TOKEN</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AVERIFIER" class="xref">VERIFIER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ACALLBACK" class="xref">CALLBACK</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:OAUTH/REQUEST-TOKEN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH%2FREQUEST-TOKEN">OAUTH/REQUEST-TOKEN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">REQUEST</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L18">Source</a>  </header> <div class="docstring"><pre>Perform the oauth/request-token step of the process.

This creates a new session object and returns three values:
  TOKEN               --- The newly generated request token.
  TOKEN-SECRET        --- The newly generated request token secret.
  CALLBACK-CONFIRMED  --- Whether the callback has been confirmed. According to
                          the spec, this should always be T.

Signals a PARAMETER-ERROR or VERIFICATION-ERROR on an invalid request.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AMAKE-SESSION" class="xref">MAKE-SESSION</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN" class="xref">TOKEN</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN-SECRET" class="xref">TOKEN-SECRET</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:OAUTH/VERIFY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AOAUTH%2FVERIFY">OAUTH/VERIFY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">REQUEST</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L21">Source</a>  </header> <div class="docstring"><pre>Standard endpoint to use on any protected resource.

This verifies the request and makes sure it uses a valid access token.
Returns T on success.

Signals a PARAMETER-ERROR or VERIFICATION-ERROR on an invalid request.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:PARAMETERS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3APARAMETERS">PARAMETERS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CONDITION</li> </ul>  </header> <div class="docstring"><pre>Accesses the parameters of the request.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF PARAMETERS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20PARAMETERS%29">(SETF PARAMETERS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:RECORD-NONCE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ARECORD-NONCE">RECORD-NONCE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">TIMESTAMP</li>  <li class="argument">NONCE</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L16">Source</a>  </header> <div class="docstring"><pre>Remember the given nonce for the used timestamp.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:REHASH-SESSION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AREHASH-SESSION">REHASH-SESSION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">SESSION</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L13">Source</a>  </header> <div class="docstring"><pre>Updates the session object to use a new token and token-secret.

The server must ensure that the session will no longer be accessible through SESSION
using the old token, but will be accessible through the newly generated token.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">SESSION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:REQUEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST">REQUEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CONDITION</li> </ul>  </header> <div class="docstring"><pre>The request object that the error occurred on.

See <a href="#CONDITION%20NORTH%3ANORTH-CONDITION" class="xref">NORTH-CONDITION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:REQUEST-TOKEN-URI"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST-TOKEN-URI">REQUEST-TOKEN-URI</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the oauth/request-token uri, the first endpoint for the oAuth process.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF REQUEST-TOKEN-URI)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20REQUEST-TOKEN-URI%29">(SETF REQUEST-TOKEN-URI)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:REVOKE-APPLICATION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AREVOKE-APPLICATION">REVOKE-APPLICATION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">APPLICATION-KEY</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L14">Source</a>  </header> <div class="docstring"><pre>Removes the given application from the server.

The application must be no longer reachable through CONSUMER on the server and all
sessions authorized through this application must be invalidated.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3AAPPLICATION" class="xref">APPLICATION</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">SESSION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:REVOKE-SESSION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AREVOKE-SESSION">REVOKE-SESSION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">TOKEN</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L15">Source</a>  </header> <div class="docstring"><pre>Removes the given session from the server.

The session must no longer be valid and any client trying to use its tokens to
access any resource or perform any step of the oauth process must be rejected.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">SESSION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:SECRET"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ASECRET">SECRET</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the application secret.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF SECRET)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20SECRET%29">(SETF SECRET)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:SESSION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ASESSION">SESSION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">SERVER</li>  <li class="argument">TOKEN</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/server.lisp#L12">Source</a>  </header> <div class="docstring"><pre>Returns the session object associated with the given token on the server, if any.

See <a href="#CLASS%20NORTH%3ASERVER" class="xref">SERVER</a>
See <a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">SESSION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:SESSIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ASESSIONS">SESSIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accessor to the hash table of token -&gt; session in the server.

See <a href="#CLASS%20NORTH%3ASIMPLE-SERVER" class="xref">SIMPLE-SERVER</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF SESSIONS)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20SESSIONS%29">(SETF SESSIONS)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:SIGN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ASIGN">SIGN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">METHOD</li>  <li class="argument">DATA</li>  <li class="argument">CONSUMER-SECRET</li>  <li class="argument">&amp;OPTIONAL</li>  <li class="argument">TOKEN-SECRET</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L56">Source</a>  </header> <div class="docstring"><pre>Signs the given data using the specified method.

By default, :PLAINTEXT, :HMAC-SHA1, and :CMAC-AES are supported.
A string can be used for the method as well, but will be converted
to a keyword first.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:STATUS-CODE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ASTATUS-CODE">STATUS-CODE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">CONDITION</li> </ul>  </header> <div class="docstring"><pre>The returned status code of the failed request.

See <a href="#CONDITION%20NORTH%3AREQUEST-FAILED" class="xref">REQUEST-FAILED</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:TOKEN"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN">TOKEN</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the current (access or request) token.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF TOKEN)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20TOKEN%29">(SETF TOKEN)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:TOKEN-SECRET"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3ATOKEN-SECRET">TOKEN-SECRET</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the current (access or request) token secret.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF TOKEN-SECRET)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20TOKEN-SECRET%29">(SETF TOKEN-SECRET)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:URL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AURL">URL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the URL of the request.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF URL)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20URL%29">(SETF URL)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:VERIFIER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AVERIFIER">VERIFIER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accessor to the verifier token that the consumer has to provide to exchange the request token for an access token.

See <a href="#GENERIC-FUNCTION%20NORTH%3ASESSION" class="xref">SESSION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF VERIFIER)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20VERIFIER%29">(SETF VERIFIER)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:VERIFY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AVERIFY">VERIFY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">REQUEST</li>  <li class="argument">CONSUMER-SECRET</li>  <li class="argument">&amp;OPTIONAL</li>  <li class="argument">TOKEN-SECRET</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/request.lisp#L11">Source</a>  </header> <div class="docstring"><pre>Verifies whether the signature in the request is valid.
To do this it destructures the Authorization header and uses it values to construct a 
new signature. This is then compared against the oauth_signature value in the oauth
alist.

See <a href="#GENERIC-FUNCTION%20NORTH%3AREQUEST" class="xref">REQUEST</a>
See <a href="#FUNCTION%20NORTH%3ADESTRUCTURE-OAUTH-HEADER" class="xref">DESTRUCTURE-OAUTH-HEADER</a>
See <a href="#FUNCTION%20NORTH%3ACREATE-SIGNATURE" class="xref">CREATE-SIGNATURE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:VERIFY-URI"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3AVERIFY-URI">VERIFY-URI</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><pre>Accesses the oauth/verify uri, an optional endpoint to test whether the process completed successfully.</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION NORTH:(SETF VERIFY-URI)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20NORTH%3A%28SETF%20VERIFY-URI%29">(SETF VERIFY-URI)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">NEW-VALUE</li>  <li class="argument">OBJECT</li> </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition setf-expander callable" id="SETF NORTH:PGET"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SETF-EXPANDER</span> <h4 class="name"> <a href="#SETF%20NORTH%3APGET">PGET</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"> <li class="argument">KEY</li>  <li class="argument">ALIST</li> </ul>  <a class="source-link" href="https://github.com/Shinmera/north/blob/master/toolkit.lisp#L19">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li> </ul> </article> </li> </ul> </section> </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 